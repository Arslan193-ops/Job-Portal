@model Job_Portal.Models.Application
@{
    ViewData["Title"] = "Application Details";
    var role = Context.Session.GetString("UserRole"); // from session
}

<h1>Application Details</h1>

<div class="card shadow-sm p-4 mb-4">
    <h4 class="mb-3">Application Information</h4>
    <dl class="row">
        <dt class="col-sm-3">Applied Date</dt>
        <dd class="col-sm-9">@Model.AppliedDate.ToString("MMM dd, yyyy")</dd>

        <dt class="col-sm-3">Job Title</dt>
        <dd class="col-sm-9">@Model.Job?.Title</dd>

        <dt class="col-sm-3">Employer</dt>
        <dd class="col-sm-9">@Model.Job?.Employer?.Name</dd>

        <dt class="col-sm-3">Applicant Name</dt>
        <dd class="col-sm-9">@Model.User?.Name</dd>

        <dt class="col-sm-3">Applicant Email</dt>
        <dd class="col-sm-9">@Model.User?.Email</dd>

        <dt class="col-sm-3">CV</dt>
        <dd class="col-sm-9">
            @if (!string.IsNullOrEmpty(Model.CvFilePath))
            {
                <a href="@Model.CvFilePath" target="_blank" class="btn btn-outline-primary">
                    📄 Download CV
                </a>
            }
            else
            {
                <span class="text-muted">No CV uploaded</span>
            }
        </dd>
    </dl>
</div>

<div>
    @if (role == "Employer")
    {
        <a asp-controller="Users" asp-action="EmployerDashboard" class="btn btn-secondary">⬅ Back to Employer Dashboard</a>
    }
    else if (role == "JobSeeker")
    {
        <a asp-controller="Applications" asp-action="Index" class="btn btn-secondary">⬅ Back </a>
    }
</div>
